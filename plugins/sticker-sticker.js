/*
//══════════════════════════════════════════════════════════════════════════════════════════════════════//
//                                                                                                      //
//                                ＷＨＡＴＳＡＰＰ ＢＯＴ－ＭＤ                                             // 
//                                                                                                      // 
//                                         Ｖ：１．０                                                    // 
//                                                                                                      // 
//                                                                                                      //
//         ██████ ██    ██  ██████  ███    ██ ██    ██ ███████       ██████   ██████  ████████          //
//        ██       ██  ██  ██       ████   ██ ██    ██ ██            ██   ██ ██    ██    ██             //
//        ██        ████   ██   ███ ██ ██  ██ ██    ██ ███████ █████ ██████  ██    ██    ██             //   
//        ██         ██    ██    ██ ██  ██ ██ ██    ██      ██       ██   ██ ██    ██    ██             //  
//         ██████    ██     ██████  ██   ████  ██████  ███████       ██████   ██████     ██             //  
//                                                                                                      //
//                                                                                                      //
//                                                                                                      //
//                                                                                                      //
//                                                                                                      //
//                                                                                                      //
//══════════════════════════════════════════════════════════════════════════════════════════════════════//

*
   * @project_name : CYGNUS-BOT
   * @author : CODERXSA
   * @youtube : https://www.youtube.com/coderxsa
   * @description : My Private build i made public for everone to use and easy hosting.
   * @version 1.0
*
   * Licensed under the  GPL-3.0 License;
* 
   * Created By CODERX.
   * © 2024 CYGNUS-BOT.
*/


//══════════════════════════════════════════════════════════════════════════════════════════════════════//

function _0x5dad(_0x264179,_0x580b35){const _0x35c000=_0x35c0();return _0x5dad=function(_0x5dad9d,_0x326e32){_0x5dad9d=_0x5dad9d-0x1b9;let _0x3fa798=_0x35c000[_0x5dad9d];return _0x3fa798;},_0x5dad(_0x264179,_0x580b35);}const _0x254a9e=_0x5dad;function _0x35c0(){const _0x568c98=['quoted','417goFOsb','138OafFqV','msg','full','text',';base64,','pack','2169gmYmuU','stringify','session','2.20.205.16','mediaType','test','HeadlessChrome/88.0.4324.190','WhatsApp/2.2037.6\x20Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_6)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/85.0.4183.83\x20Safari/537.36','--disable-setuid-sandbox','8390imJkkQ','split','6686823CNPnUQ','00:00:00.0','--disable-offline-load-stale-cache','crop','tags','author','base64','help','sticker','from','2DBITxF','19428JlupzU','sfull','3.6.10\x20UPDATE\x20AVAILABLE:\x203.6.11','149135jZlHyd','join','download','--aggressive-cache-discard','876193TJvseN','310448xgkmkb','3482787xuJMsF','https://sticker-api.openwa.dev/convertMp4BufferToWebpDataUrl','--disk-cache-size=0','packname','command','data:video/mp4;base64,','toString','application/json;charset=utf-8','C:\x5c\x5cProgram\x20Files\x20(x86)\x5c\x5cGoogle\x5c\x5cChrome\x5c\x5cApplication\x5c\x5cchrome.exe','application/json,\x20text/plain,\x20/'];_0x35c0=function(){return _0x568c98;};return _0x35c0();}(function(_0x33dd99,_0x392e54){const _0x4613ef=_0x5dad,_0x10ebcc=_0x33dd99();while(!![]){try{const _0x3c8b95=parseInt(_0x4613ef(0x1c2))/0x1*(-parseInt(_0x4613ef(0x1ba))/0x2)+parseInt(_0x4613ef(0x1cf))/0x3*(parseInt(_0x4613ef(0x1bb))/0x4)+parseInt(_0x4613ef(0x1be))/0x5*(-parseInt(_0x4613ef(0x1d0))/0x6)+parseInt(_0x4613ef(0x1c4))/0x7+parseInt(_0x4613ef(0x1c3))/0x8+-parseInt(_0x4613ef(0x1d6))/0x9*(-parseInt(_0x4613ef(0x1df))/0xa)+parseInt(_0x4613ef(0x1e1))/0xb;if(_0x3c8b95===_0x392e54)break;else _0x10ebcc['push'](_0x10ebcc['shift']());}catch(_0x2c2a08){_0x10ebcc['push'](_0x10ebcc['shift']());}}}(_0x35c0,0x70254));import _0x568c0a from'node-fetch';import{addExif}from'../lib/sticker.js';import{Sticker}from'wa-sticker-formatter';let handler=async(_0x4173b0,{conn:_0x54b02d,args:_0x39e154,usedPrefix:_0x1b9a5b,command:_0x5a1848})=>{const _0x1fc3c1=_0x5dad;let _0x33f569=![];try{let [_0x153f36,..._0x29ddc9]=_0x39e154[_0x1fc3c1(0x1bf)]` `[_0x1fc3c1(0x1e0)]`|`;_0x29ddc9=(_0x29ddc9||[])[_0x1fc3c1(0x1bf)]`|`;let _0x144f8d=_0x4173b0[_0x1fc3c1(0x1ce)]?_0x4173b0['quoted']:_0x4173b0,_0x25d5cc=(_0x144f8d[_0x1fc3c1(0x1d1)]||_0x144f8d)['mimetype']||_0x144f8d[_0x1fc3c1(0x1da)]||'';if(/webp/g[_0x1fc3c1(0x1db)](_0x25d5cc)){let _0x5e40af=await _0x144f8d[_0x1fc3c1(0x1c0)]?.();_0x33f569=await addExif(_0x5e40af,_0x153f36||global[_0x1fc3c1(0x1c7)],_0x29ddc9||global[_0x1fc3c1(0x1e6)]);}else{if(/image/g[_0x1fc3c1(0x1db)](_0x25d5cc)){let _0xf90ba7=await _0x144f8d[_0x1fc3c1(0x1c0)]?.();_0x33f569=await createSticker(_0xf90ba7,![],_0x153f36||global[_0x1fc3c1(0x1c7)],_0x29ddc9||global[_0x1fc3c1(0x1e6)]);}else{if(/video/g[_0x1fc3c1(0x1db)](_0x25d5cc)){let _0x424de4=await _0x144f8d[_0x1fc3c1(0x1c0)]?.();_0x33f569=await mp4ToWebp(_0x424de4,{'pack':_0x153f36||global[_0x1fc3c1(0x1c7)],'author':_0x29ddc9||global[_0x1fc3c1(0x1e6)]});}else{if(_0x39e154[0x0]&&isUrl(_0x39e154[0x0]))_0x33f569=await createSticker(![],_0x39e154[0x0],'',_0x29ddc9,0x14);else throw'*RESPOND\x20TO\x20A\x20IMAGE\x20OR\x20VIDEO\x20OR\x20GIF\x20'+(_0x1b9a5b+_0x5a1848)+'*';}}}}catch{_0x33f569='*huh*';}finally{_0x4173b0['reply'](_0x33f569);}};handler[_0x254a9e(0x1e8)]=[_0x254a9e(0x1bc)],handler[_0x254a9e(0x1e5)]=[_0x254a9e(0x1e9)],handler[_0x254a9e(0x1c8)]=/^s(tic?ker)?(gif)?(wm)?$/i;export default handler;const isUrl=_0x260376=>_0x260376['match'](new RegExp(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)(jpe?g|gif|png)/,'gi'));async function createSticker(_0x45a373,_0x2a0501,_0x12bf28,_0x4f9551,_0x367fe0){const _0x4911cd=_0x254a9e;let _0x4438f5={'type':_0x4911cd(0x1d2),'pack':_0x12bf28,'author':_0x4f9551,'quality':_0x367fe0};return new Sticker(_0x45a373?_0x45a373:_0x2a0501,_0x4438f5)['toBuffer']();}async function mp4ToWebp(_0x26c7f8,_0x1acdbc){const _0x49a4a0=_0x254a9e;if(_0x1acdbc){if(!_0x1acdbc['pack'])_0x1acdbc[_0x49a4a0(0x1d5)]='‎';if(!_0x1acdbc[_0x49a4a0(0x1e6)])_0x1acdbc[_0x49a4a0(0x1e6)]='‎';if(!_0x1acdbc[_0x49a4a0(0x1e4)])_0x1acdbc[_0x49a4a0(0x1e4)]=![];}else!_0x1acdbc&&(_0x1acdbc={'pack':'‎','author':'‎','crop':![]});let _0x489ebf=_0x26c7f8[_0x49a4a0(0x1ca)](_0x49a4a0(0x1e7));const _0x31fda9={'file':_0x49a4a0(0x1c9)+_0x489ebf,'processOptions':{'crop':_0x1acdbc?.[_0x49a4a0(0x1e4)],'startTime':_0x49a4a0(0x1e2),'endTime':'00:00:7.0','loop':0x0},'stickerMetadata':{..._0x1acdbc},'sessionInfo':{'WA_VERSION':'2.2106.5','PAGE_UA':_0x49a4a0(0x1dd),'WA_AUTOMATE_VERSION':_0x49a4a0(0x1bd),'BROWSER_VERSION':_0x49a4a0(0x1dc),'OS':'Windows\x20Server\x202016','START_TS':0x177dc64c025,'NUM':'6247','LAUNCH_TIME_MS':0x1efe,'PHONE_VERSION':_0x49a4a0(0x1d9)},'config':{'sessionId':_0x49a4a0(0x1d8),'headless':!![],'qrTimeout':0x14,'authTimeout':0x0,'cacheEnabled':![],'useChrome':!![],'killProcessOnBrowserClose':!![],'throwErrorOnTosBlock':![],'chromiumArgs':['--no-sandbox',_0x49a4a0(0x1de),_0x49a4a0(0x1c1),'--disable-cache','--disable-application-cache',_0x49a4a0(0x1e3),_0x49a4a0(0x1c6)],'executablePath':_0x49a4a0(0x1cc),'skipBrokenMethodsCheck':!![],'stickerServerEndpoint':!![]}};let _0x21e655=await _0x568c0a(_0x49a4a0(0x1c5),{'method':'post','headers':{'Accept':_0x49a4a0(0x1cd),'Content-Type':_0x49a4a0(0x1cb)},'body':JSON[_0x49a4a0(0x1d7)](_0x31fda9)});return Buffer[_0x49a4a0(0x1b9)]((await _0x21e655[_0x49a4a0(0x1d3)]())[_0x49a4a0(0x1e0)](_0x49a4a0(0x1d4))[0x1],_0x49a4a0(0x1e7));}